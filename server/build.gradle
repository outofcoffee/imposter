apply plugin: 'java'
apply plugin: "com.github.johnrengelman.shadow"

compileJava {
    sourceCompatibility = 1.8
}

dependencies {
    compile project (':core')

    // logging
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: "$version_log4j"
    compile group: 'org.apache.logging.log4j', name: 'log4j-jcl', version: "$version_log4j"
    compile group: 'org.apache.logging.log4j', name: 'log4j-slf4j-impl', version: "$version_log4j"
    compile group: 'org.apache.logging.log4j', name: 'log4j-1.2-api', version: "$version_log4j"
    compile group: 'org.apache.logging.log4j', name: 'log4j-jul', version: "$version_log4j"

    // test
    testCompile group: 'junit', name: 'junit', version: "$version_junit"
    testCompile "io.vertx:vertx-unit:$version_vertx"
    testCompile "com.jayway.restassured:rest-assured:$version_restAssured"
}

shadowJar {
    baseName = rootProject.name
    version = ""
    classifier = "fat"

    manifest {
        attributes "Main-Class": "com.gatehill.imposter.server.ImposterLauncher"
        attributes "Main-Verticle": "com.gatehill.imposter.server.ImposterVerticle"
    }

    mergeServiceFiles {
        include "META-INF/services/io.vertx.core.spi.VerticleFactory"
    }
}
